window.fathom=function(){var t=document.currentScript||document.querySelector('script[src*="script.js"][site]')||document.querySelector("script[data-site]")||document.querySelector("script[site]"),e=t.getAttribute("data-site")||t.getAttribute("site"),o=!1,n=!0,a=!0,i=[],r=[];function d(){window.fathom.trackPageview()}function c(){var t;void 0!==history&&(t=history.pushState,history.pushState=function(){var e=t.apply(history,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchangefathom")),e},window.addEventListener("popstate",(function(){window.dispatchEvent(new Event("locationchangefathom"))})),window.addEventListener("locationchangefathom",d))}function s(){window.addEventListener("hashchange",d)}if("true"==(t.getAttribute("data-honor-dnt")||t.getAttribute("honor-dnt"))&&(o="doNotTrack"in navigator&&"1"===navigator.doNotTrack),"false"==(t.getAttribute("data-auto")||t.getAttribute("auto"))&&(n=!1),"false"==(t.getAttribute("data-canonical")||t.getAttribute("canonical"))&&(a=!1),(t.getAttribute("data-excluded-domains")||t.getAttribute("excluded-domains"))&&(i=(t.getAttribute("data-excluded-domains")||t.getAttribute("excluded-domains")).split(",")),t.getAttribute("data-included-domains")||t.getAttribute("included-domains")?r=(t.getAttribute("data-included-domains")||t.getAttribute("included-domains")).split(","):(t.getAttribute("data-allowed-domains")||t.getAttribute("allowed-domains"))&&(r=(t.getAttribute("data-allowed-domains")||t.getAttribute("allowed-domains")).split(",")),t.getAttribute("data-spa")||t.getAttribute("spa"))switch(t.getAttribute("data-spa")||t.getAttribute("spa")){case"history":c();break;case"hash":s();break;case"auto":(void 0!==history?c:s)()}var u,l="https://cdn.usefathom.com/";function m(t){t.cid=Math.floor(1e8*Math.random())+1,t={[t.cid]:t.cid,...t};try{var e="?v="+encodeURIComponent(btoa(JSON.stringify(t)))}catch(o){e="?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}return e}function h(){for(var t,e={},o=window.location.search.substring(window.location.search.indexOf("?")+1).split("&"),n=0;n<o.length;n++)o[n]&&(t=o[n].split("="),-1<["keyword","q","ref","s","utm_campaign","utm_content","utm_medium","utm_source","utm_term","action","name","pagename","tab"].indexOf(decodeURIComponent(t[0]))&&(e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])));return e}function f(){var t=!1;try{t=window.localStorage&&window.localStorage.getItem("blockFathomTracking")}catch(t){}var e="visibilityState"in document&&"prerender"===document.visibilityState,n=-1<i.indexOf(window.location.hostname),a=!(0<r.length)||-1<r.indexOf(window.location.hostname);return!(t||e||o||n)&&a}function g(t){var e,o=window.location;return void 0===t.url?a&&document.querySelector('link[rel="canonical"][href]')&&((e=document.createElement("a")).href=document.querySelector('link[rel="canonical"][href]').href,o=e):(o=document.createElement("a")).href=t.url,o}return t.src.indexOf("cdn.usefathom.com")<0&&((u=document.createElement("a")).href=t.src,l="https://"+u.hostname+"/"),n&&setTimeout((function(){window.fathom.trackPageview()})),{siteId:e,send:function(t){var e;f()&&((e=document.createElement("img")).setAttribute("alt",""),e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.src=l+m(t),e.addEventListener("load",(function(){e.parentNode.removeChild(e)})),e.addEventListener("error",(function(){e.parentNode.removeChild(e)})),document.body.appendChild(e))},beacon:function(t){f()&&navigator.sendBeacon(l+m(t))},trackPageview:function(e){var o,n,a=g(e=void 0===e?{}:e);""!==a.host&&(o=a.protocol+"//"+a.hostname,n=a.pathname||"/","hash"==t.getAttribute("data-spa")&&(n+=a.hash),this.send({h:o,p:n,r:e.referrer||(document.referrer.indexOf(o)<0?document.referrer:""),sid:this.siteId,qs:h()}))},trackGoal:function(t,e){var o=g({}),n=o.protocol+"//"+o.hostname;this.beacon({gcode:t,gval:e,qs:h(),p:o.pathname||"/",h:n,r:document.referrer.indexOf(n)<0?document.referrer:"",sid:this.siteId})},trackEvent:function(t,e={}){var o=g({}),n=o.protocol+"//"+o.hostname;this.beacon({name:t,payload:JSON.stringify(e),p:o.pathname||"/",h:n,r:document.referrer.indexOf(n)<0?document.referrer:"",sid:this.siteId,qs:h()})},setSite(t){this.siteId=t},blockTrackingForMe:function(){window.localStorage?(window.localStorage.setItem("blockFathomTracking",!0),alert("You have blocked Fathom for yourself on this website.")):alert("Your browser doesn't support localStorage.")},enableTrackingForMe:function(){window.localStorage&&(window.localStorage.removeItem("blockFathomTracking"),alert("Fathom has been enabled for this website."))}}}();